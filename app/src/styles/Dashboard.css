@import "tailwindcss";
@import "./theme.css";

@layer components {
  .dashboard-container {
    @apply h-full flex flex-col space-y-8 max-w-7xl mx-auto pb-8;
  }

  .dashboard-header {
    @apply flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4;
  }

  .dashboard-title {
    @apply text-3xl font-bold text-slate-900 dark:text-slate-100 tracking-tight;
  }

  .dashboard-subtitle {
    @apply text-slate-500 dark:text-slate-400 font-medium mt-1;
  }

  .time-range-selector {
    @apply bg-white dark:bg-slate-800 p-1.5 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm flex;
  }

  .time-range-button {
    @apply px-2 sm:px-4 py-1.5 text-xs font-bold rounded-lg transition-all duration-200;
  }

  .time-range-button-active {
    @apply bg-slate-900 dark:bg-brand-600 text-white shadow-md;
  }

  .time-range-button-inactive {
    @apply text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-700;
  }

  .summary-cards-grid {
    @apply grid grid-cols-1 sm:grid-cols-3 gap-6;
  }

  .summary-card {
    @apply bg-gradient-to-br from-white to-slate-50 dark:from-slate-800 dark:to-slate-800/50 p-6 rounded-2xl shadow-md border border-slate-200 dark:border-slate-700 flex flex-col justify-center transition-all duration-300 hover:shadow-xl hover:border-brand-200 dark:hover:border-brand-700 hover:-translate-y-1 cursor-pointer;
  }

  .summary-card-title {
    @apply text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-3 group-hover:text-brand-600 dark:group-hover:text-brand-400 transition-colors;
  }

  .summary-card-value {
    @apply text-3xl font-bold text-slate-900 dark:text-slate-100 tracking-tight;
  }

  .chart-container {
    @apply flex flex-col flex-1 bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-md border border-slate-200 dark:border-slate-700 min-h-[400px] hover:shadow-lg transition-shadow duration-300 overflow-hidden;
  }

  .chart-header {
    @apply mb-6;
  }

  .chart-title {
    @apply text-lg font-bold text-slate-900 dark:text-slate-100;
  }

  .chart-subtitle {
    @apply text-sm text-slate-500 dark:text-slate-400 mt-1;
  }

  .chart-wrapper {
    @apply h-[350px] min-h-0 flex flex-col overflow-hidden relative;
  }

  .chart-body {
    @apply flex-1 min-h-0 overflow-hidden relative;
  }

  /* Ensure direct children (Chart.js containers/canvas) fit their parent */
  .chart-body > * {
    width: 100% !important;
    height: 100% !important;
    max-width: 100% !important;
    max-height: 100% !important;
    box-sizing: border-box !important;
  }

  .chart-body canvas {
    width: 100% !important;
    height: 100% !important;
    display: block;
  }

  .loading-container {
    @apply h-full flex items-center justify-center;
  }

  .loading-content {
    @apply flex flex-col items-center gap-3;
  }

  .loading-spinner {
    @apply w-12 h-12 border-4 border-brand-200 border-t-brand-600 rounded-full animate-spin;
  }

  .loading-text {
    @apply text-slate-400 font-medium;
  }

  .charts-grid {
    @apply grid grid-cols-1 lg:grid-cols-2 gap-6;
  }

  .chart-card {
    @apply bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-md border border-slate-200 dark:border-slate-700 h-[400px] hover:shadow-lg transition-shadow duration-300 flex flex-col overflow-hidden;
  }

  .chart-body canvas {
    width: 100% !important;
    height: 100% !important;
    max-width: 100% !important;
    max-height: 100% !important;
    display: block;
    box-sizing: border-box;
  }

  .chart-card-full {
    @apply lg:col-span-2;
  }

  /* Transaction row sizing via CSS variables â€” controlled by user setting */
  /* Default values live on :root so they can be overridden by JavaScript changes to document.documentElement */
  :root {
    --hb-tx-cell-py: 12px; /* default vertical padding (top and bottom each) */
    --hb-tx-cell-px: 16px; /* default horizontal padding (left and right) */
  }

  .account-transactions-table thead th {
    padding: var(--hb-tx-cell-py) var(--hb-tx-cell-px) !important;
    font-size: 0.75rem !important; /* text-xs */
  }

  /* Use explicit padding + font-size to ensure we override utility classes in cells */
  .account-transactions-table tbody td {
    padding: var(--hb-tx-cell-py) var(--hb-tx-cell-px) !important;
    font-size: 0.75rem !important; /* text-xs */
  }

  /* Make inputs and rounded controls inside table smaller */
  .account-transactions-table input,
  .account-transactions-table .rounded-lg,
  .account-transactions-table .p-2 {
    padding: 0.25rem !important; /* p-1 */
    font-size: 0.75rem !important;
  }

  /* Slightly reduce padding for buttons/icons that use p-2 */
  .account-transactions-table .p-2 {
    padding: 0.25rem !important;
  }

  .account-visibility .account-item {
    @apply cursor-pointer;
  }

  .account-visibility .account-dot {
    @apply inline-block;
  }

  /* Custom checkbox for account visibility */
  .account-visibility .account-checkbox {
    -webkit-appearance: none;
    appearance: none;
    width: 18px;
    height: 18px;
    border-radius: 6px;
    border: 2px solid rgba(148, 163, 184, 0.4);
    display: inline-block;
    position: relative;
    cursor: pointer;
    transition: all 120ms ease;
    margin-right: 6px;
    flex: 0 0 auto;
  }

  .account-visibility .account-checkbox::after {
    content: "";
    position: absolute;
    top: 2px;
    left: 6px;
    width: 6px;
    height: 10px;
    border: solid white;
    border-width: 0 2px 2px 0;
    transform: rotate(45deg) scale(0);
    transition: transform 120ms ease-in-out;
  }

  .account-visibility .account-checkbox:checked {
    background: var(--hb-account-color, rgb(59, 130, 246));
    border-color: transparent;
    box-shadow: 0 0 0 6px rgba(59, 130, 246, 0.08);
  }

  .account-visibility .account-checkbox:checked::after {
    transform: rotate(45deg) scale(1);
  }

  .account-visibility .account-checkbox:focus {
    outline: none;
    box-shadow: 0 0 0 6px rgba(59, 130, 246, 0.16);
  }

  .account-visibility .toggle-all {
    @apply text-sm font-medium text-slate-600 dark:text-slate-300 underline hover:no-underline;
  }
}
